# 问题归档

## 已解决问题

1. **重复年份后缀问题**
   - 描述：当年份重复出现时，系统会自动添加后缀
   - 状态：已解决
   - 解决日期：2025-07-20

2. **自动清理功能**
   - 描述：系统现在支持自动清理输出目录
   - 状态：已解决
   - 解决日期：2025-07-20

3. **交互式文件选取功能**
   - 描述：系统现在支持交互式选取操作文件
   - 状态：已解决
   - 解决日期：2025-07-20

4. **支持空值筛选**
   - 描述：某些值传空时，系统应标识为不筛选该项
   - 状态：已解决
   - 解决日期：当前版本已支持空值通配符筛选

## 待解决问题

### 🔴 高优先级问题（紧急修复）

1. **清理调试代码**
   - 描述：`main.py` 第9-11行存在调试打印语句 `print("HIHIHI")` 等
   - 影响：影响生产环境的专业性和日志清洁度
   - 建议：立即删除所有调试打印语句
   - 优先级：🔴 紧急

2. **全局变量重构**
   - 描述：大量使用全局变量 `data_store`, `filter_store`, `filtered_data`
   - 影响：代码维护性差，容易出现状态管理问题
   - 建议：使用类或配置对象管理状态
   - 优先级：🔴 高

3. **错误处理增强**
   - 描述：异常处理覆盖不全面，缺乏优雅的错误恢复机制
   - 影响：程序稳定性和用户体验
   - 建议：添加更多异常捕获和恢复机制
   - 优先级：🔴 高

4. **函数职责分离**
   - 描述：单个函数承担过多责任，如 `apply_filters()` 函数过于复杂
   - 影响：代码可读性和维护性
   - 建议：按单一职责原则拆分函数
   - 优先级：🔴 高

### 🟡 中优先级问题（架构优化）

5. **模块化重构**
   - 描述：所有功能都在 `main.py` 中，缺乏模块化设计
   - 建议：按功能拆分为独立模块
     - `data_extractor.py` - 数据提取
     - `filter_processor.py` - 筛选处理  
     - `output_generator.py` - 结果输出
     - `config.py` - 配置管理
   - 优先级：🟡 中

6. **配置化改进**
   - 描述：多个硬编码参数需要配置化
   - 子项目：
     - Sheet名称配置化（"总表"、"总表筛选"）
     - 输出目录配置化（"outputs"）
     - 筛选条件前缀配置化（"条件_"）
     - 日志系统配置化
   - 建议：创建 `config.yaml` 或 `config.json` 配置文件
   - 优先级：🟡 中

7. **性能优化**
   - 描述：处理大型数据集时可能存在内存和性能问题
   - 建议：
     - 使用 pandas 向量化操作替代循环
     - 实现数据分块处理
     - 添加进度条显示
   - 优先级：🟡 中

8. **单元测试添加**
   - 描述：缺乏单元测试覆盖
   - 建议：为核心功能添加测试用例
   - 优先级：🟡 中

### 🟢 低优先级问题（功能扩展）

9. **输出文件名格式配置化**
   - 描述：输出文件名格式固定
   - 建议：支持自定义文件名模板
   - 优先级：🟢 低

10. **多平台发布支持**
    - 描述：需要支持生成多平台可执行文件
    - 建议：使用 PyInstaller 打包
    - 优先级：🟢 低

11. **功能扩展**
    - 描述：支持更多数据格式和处理方式
    - 建议：
      - 支持 CSV 输入
      - 支持复杂筛选条件（范围、正则表达式）
      - 支持数据统计和分析
    - 优先级：🟢 低

## 修复计划

### 第一阶段：代码清理（1-2天）
- [ ] 删除调试代码
- [ ] 重构全局变量
- [ ] 完善错误处理
- [ ] 函数职责分离

### 第二阶段：架构优化（3-5天）
- [ ] 模块化重构
- [ ] 配置系统实现
- [ ] 性能优化
- [ ] 单元测试添加

### 第三阶段：功能扩展（按需）
- [ ] 多平台打包
- [ ] 功能扩展
- [ ] 用户界面优化

## 技术债务评估

- **代码质量**：⚠️ 需要改进
- **架构设计**：⚠️ 需要重构  
- **测试覆盖**：❌ 缺失
- **文档完整性**：✅ 良好
- **功能完整性**：✅ 基本满足需求
